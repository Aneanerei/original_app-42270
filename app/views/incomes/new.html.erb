<!-- カテゴリ追加モーダル -->
<div id="modal-overlay" class="modal-overlay" style="display: none;">
  <div class="modal-content">
    <%= form_with model: CategoryIncome.new, url: category_incomes_path, local: true, data: { turbo: false } do |f| %>
      <%= f.text_field :name, placeholder: "カテゴリ名を入力", class: "form-control" %>
      <%= f.submit "追加", class: "form-submit" %>
    <% end %>
    <button id="close-modal" class="form-button">閉じる</button>
  </div>
</div>

<!-- 労働時間追加モーダル -->
<div id="worktime-modal" class="modal-overlay" style="display: none;">
  <div class="modal-content-work">
    <%= form_with model: @work_time, url: work_times_path, local: true, data: { turbo: false } do |f| %>

      <!-- 日付入力 -->
      <div class="form-group">
        <%= f.label :date, "日付" %><br>
        <%= f.date_field :date, value: Date.today, class: "form-control" %>
      </div>

      <!-- 労働時間（時間＋分） -->
      <div class="form-group">
        <%= label_tag :labor_hour, "労働時間（時）" %>
        <%= select_tag :labor_hour, options_for_select((0..24).to_a.map { |h| ["#{h}時間", h] }), class: "form-control-inline" %>
      </div>

      <div class="form-group">
        <%= label_tag :labor_minute, "労働時間（分）" %>
        <%= select_tag :labor_minute, options_for_select([0, 15, 30, 45].map { |m| ["#{m}分", m] }), class: "form-control-inline" %>
      </div>

      <!-- 作業日報 -->
      <div class="form-group">
        <%= f.label :report, "作業日報（任意）" %><br>
        <%= f.text_area :report, class: "form-control", placeholder: "作業内容など" %>
      </div>

      <!-- リダイレクト先を保持 -->
      <%= hidden_field_tag :redirect_path, request.fullpath %>

      <div class="form-group">
        <%= f.submit "登録", class: "form-submit" %>
      </div>
    <% end %>

    <button id="close-worktime-modal" class="form-button">閉じる</button>
  </div>
</div>

<% if flash[:alert] %>
  <div class="error-messages">
    <ul>
      <li><%= flash[:alert] %></li>
    </ul>
  </div>
<% end %>

    <div class="book">
  <!-- 左ページ -->
  <div class="page left-page"> 
   
  
    <div class="tabs">
      <button class="tab active"><p class="date white-text"><%= Date.today.strftime('%Y/%m/%d') %></p></button>
      <%= link_to "収入入力", new_income_path, class: "tab" %>
      <button class="tab">支出入力</button>
      <%= link_to new_work_time_path do %><button class="tab">労働時間入力</button><% end %>
      <button class="tab">アルバム</button>
      <button class="tab">分析</button>
      <button class="tab">日記</button>
    </div>


    <div class="tab-content"> 
      <h2>収入登録</h2>
      <div class="income-main">
        <div class="income-input">
          
          <%= form_with model: @income, local: true do |f| %>
            <div class="form-group">
              <%= f.label :date, "日付" %><br>
              <%= f.date_field :date, value: Date.today, class: "form-control" %>
            </div>

            <div class="form-group">
              <%= f.label :amount, "金額（円）" %><br>
              <%= f.number_field :amount, class: "form-control" %>
            </div>

            <div class="form-group category-wrapper">
              <%= f.label :category_income_id, "カテゴリ" %><br>
              <%= f.select :category_income_id,
             current_user.category_incomes.map { |c| [c.name, c.id] },
             { prompt: "選択してください" },
             { class: "category-select" } %><br>
        <button type="button" id="show-category-form" class="form-button">＋カテゴリ追加</button>
            </div>
            <div class="title-font-income">労働時間</div>
            <div class="form-group">
        <button id="show-worktime-form" class="form-button">＋労働時間の登録</button>
            </div>
            <div class="form-group">
              <%= f.label :memo, "メモ（任意）" %><br>
              <%= f.text_area :memo, class: "form-control" %>
            </div>

            <div class="form-group">
              <%= f.submit "登録する", class: "form-submit" %>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <!-- 右ページ -->
  <div class="page">
    <h2>Information</h2>

   <% if @category_income && @category_income.errors.any? %>
    <div class="error-messages">
      <ul>
        <% @category_income.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>
 <% if @work_time && @work_time.errors.any? %>
    <div class="error-messages">
      <ul>
        <% @work_time.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>


    <ul>
     <li><span class="info-title">日付</span>収入のあった日を選択してください。</li>
  <li><span class="info-title">金額</span>収入を入力してください。</li>
  <li><span class="info-title">カテゴリ</span>収入のカテゴリを選択してください。</li>
  <li><span class="info-title">カテゴリ追加</span>クリックすると入力欄が表示されます。</li>
  <li><span class="info-title">カテゴリ追加</span>5つまで自由にカテゴリを追加することができます。</li>
  <li><span class="info-title">労働時間</span>収入のあった日を選択してください。</li>
    </ul>
  </div>
</div>

 


